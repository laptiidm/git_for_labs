–ß—É–¥–æ–≤–æ, —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î! –î–∞–≤–∞–π —Ç–µ–ø–µ—Ä **–¥–æ–∫–ª–∞–¥–Ω–æ —Ä–æ–∑–±–µ—Ä–µ–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è** –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Ü—å–æ–º—É –∫–æ–¥—ñ.

---

## üîç –ó–ê–ì–ê–õ–¨–ù–ê –°–¢–†–£–ö–¢–£–†–ê

1. **`MaterialApp`** ‚Üí –∫–æ—Ä–µ–Ω–µ–≤–∏–π –≤—ñ–¥–∂–µ—Ç, –∑–∞–¥–∞—î —Ç–µ–º—É —Ç–∞ –ø–æ—á–∞—Ç–∫–æ–≤—É —Å—Ç–æ—Ä—ñ–Ω–∫—É.
2. **`DraggableCirclePage`** ‚Üí `StatefulWidget`, —É —è–∫–æ–º—É:

   * –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –ª–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó.
   * –ú–∞–ª—é—é—Ç—å—Å—è –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫ (–º—ñ—à–µ–Ω—å) —ñ —Å–∏–Ω—î –∫–æ–ª–æ.

---

## üß± –ü–û–ó–ò–¶–Ü–û–ù–£–í–ê–ù–ù–Ø –£ `Stack`

### Stack

* **Stack** –Ω–∞–∫–ª–∞–¥–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ –æ–¥–∏–Ω –Ω–∞ –æ–¥–Ω–æ–≥–æ.
* –ü–µ—Ä—à–∏–π —É —Å–ø–∏—Å–∫—É `children` ‚Äì **–Ω–∞–π–≥–ª–∏–±—à–µ**, –æ—Å—Ç–∞–Ω–Ω—ñ–π ‚Äî **–ø–æ–≤–µ—Ä—Ö—É**.

---

## üü© `Positioned.fromRect(...)` ‚Äî –ü—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫-–º—ñ—à–µ–Ω—å

```dart
final Rect _targetRect = Rect.fromLTWH(100, 400, 200, 100);
```

* `left = 100` ‚Äî –≤—ñ–¥—Å—Ç—É–ø –∑–ª—ñ–≤–∞.
* `top = 400` ‚Äî –≤—ñ–¥—Å—Ç—É–ø –∑–≤–µ—Ä—Ö—É.
* `width = 200`, `height = 100` ‚Äî —Ä–æ–∑–º—ñ—Ä–∏.
* –ú–∞–ª—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `Positioned.fromRect`.

üìå –í—ñ–Ω –∑–∞–≤–∂–¥–∏ —É **—Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ–π –ø–æ–∑–∏—Ü—ñ—ó** –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É –µ–∫—Ä–∞–Ω–∞.

---

## üîµ `Positioned(...)` ‚Äî –ü–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–µ –∫–æ–ª–æ

```dart
Positioned(
  left: _circlePosition.dx,
  top: _circlePosition.dy,
  ...
)
```

### –©–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ:

```dart
Transform.translate(offset: Offset(-50, -50), ...)
```

* –ó—Å—É–≤–∞—î –≤—ñ–¥–∂–µ—Ç —Ç–∞–∫, —â–æ–± —Ç–æ—á–∫–∞ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –±—É–ª–∞ **–≤ —Ü–µ–Ω—Ç—Ä—ñ –∫—Ä—É–≥–∞**, –∞ –Ω–µ –≤ –ª—ñ–≤–æ–º—É –≤–µ—Ä—Ö–Ω—å–æ–º—É –∫—É—Ç—ñ.

```dart
Transform.scale(scale: _scale, ...)
```

* –ó–º—ñ–Ω—é—î –º–∞—Å—à—Ç–∞–± –∫—Ä—É–≥–∞ (–≤—ñ–¥ 1 –¥–æ 0), –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –π–æ–≥–æ –≤ —Ç—ñ–π –∂–µ –ø–æ–∑–∏—Ü—ñ—ó.

```dart
Container(width: 100, height: 100, shape: circle)
```

* –°–∞–º–µ –∫–æ–ª–æ, –¥—ñ–∞–º–µ—Ç—Ä–æ–º 100.

üß† –û—Ç–∂–µ:

* `left/top` ‚Äî —Ü–µ **—Ü–µ–Ω—Ç—Ä –∫–æ–ª–∞**.
* `Transform.translate(-50, -50)` ‚Äî –∫–æ–º–ø–µ–Ω—Å—É—î 50% —à–∏—Ä–∏–Ω–∏/–≤–∏—Å–æ—Ç–∏, —â–æ–± —Ü–µ–Ω—Ç—Ä —Å–ø—ñ–≤–ø–∞–≤ —ñ–∑ –ø–æ–∑–∏—Ü—ñ—î—é.
* `Transform.scale` ‚Äî –º–∞—Å—à—Ç–∞–±—É—î –≤—ñ–¥ —Ü–µ–Ω—Ç—Ä—É (–±–æ –º–∏ –≤–∂–µ —Å–∫–æ—Ä–µ–≥—É–≤–∞–ª–∏ –ø–æ–∑–∏—Ü—ñ—é).

---

## üñê GestureDetector

* –û–±–≥–æ—Ä—Ç–∞—î –≤–µ—Å—å `Stack`, —â–æ–± –æ–±—Ä–æ–±–∏—Ç–∏:

  * `onPanUpdate` ‚Üí –∑–º—ñ–Ω—é—î `_circlePosition` –ø—ñ–¥ —á–∞—Å –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è.
  * `onPanEnd` ‚Üí –∑–∞–ø—É—Å–∫–∞—î –∞–Ω—ñ–º–∞—Ü—ñ—é, —è–∫—â–æ –∫–æ–ª–æ –ø–æ—Ç—Ä–∞–ø–∏–ª–æ –Ω–∞ –º—ñ—à–µ–Ω—å.

---

## üìê –Ø–∫ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è —ñ –∑–Ω–∏–∫–Ω–µ–Ω–Ω—è

1. **–ü–æ—á–∞—Ç–∫–æ–≤–∞ –ø–æ–∑–∏—Ü—ñ—è** –∫—Ä—É–≥–∞ ‚Äî –ø–æ —Ü–µ–Ω—Ç—Ä—É –µ–∫—Ä–∞–Ω–∞ –≤ initState:

   ```dart
   _circlePosition = Offset(size.width / 2, size.height / 3);
   ```

2. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ç—è–≥–Ω–µ –∫–æ–ª–æ ‚Üí –∑–º—ñ–Ω—é—î—Ç—å—Å—è `_circlePosition`.

3. –Ø–∫—â–æ –∫–æ–ª–æ –ø–æ—Ç—Ä–∞–ø–ª—è—î –Ω–∞ –º—ñ—à–µ–Ω—å (`_isCircleOnTarget`) ‚Üí –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∞–Ω—ñ–º–∞—Ü—ñ—è:

   * –¶–µ–Ω—Ç—Ä –∫–æ–ª–∞ –ø–ª–∞–≤–Ω–æ —Ä—É—Ö–∞—î—Ç—å—Å—è –¥–æ —Ü–µ–Ω—Ç—Ä—É –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞.
   * –ü–∞—Ä–∞–ª–µ–ª—å–Ω–æ –∫–æ–ª–æ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –¥–æ 0.

---

## üîö –ü—ñ—Å–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó

* `scale` –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –≤ 1.0.
* `isAnimating` —Å—Ç–∞—î false.
* –ê–ª–µ –ø–æ–∑–∏—Ü—ñ—è –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —É —Ü–µ–Ω—Ç—Ä—ñ –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞ (–º–æ–∂–Ω–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –Ω–∞–∑–∞–¥, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ).

---

## üìä –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è

```
|--------------------------------------------------|
|                                                  |
|                  (üîµ)                            |
|                                                  |
|                                                  |
|                                                  |
|             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           |
|             ‚îÇ       Drop here        ‚îÇ           |
|             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           |
|--------------------------------------------------|
```

* üîµ ‚Äî draggable –∫–æ–ª–æ.
* ‚îå‚îÄ‚îê ‚Äî –º—ñ—à–µ–Ω—å (–ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫).

---

–•–æ—á–µ—à, –º–æ–∂—É –∑—Ä–æ–±–∏—Ç–∏ –≥—Ä–∞—Ñ—ñ—á–Ω—É —Å—Ö–µ–º—É –∞–±–æ –∞–Ω—ñ–º–∞—Ü—ñ—é, —â–æ–± —Ü–µ –≤—Å–µ –±—É–ª–æ —â–µ –Ω–∞–æ—á–Ω—ñ—à–µ.




–£ —Ç–≤–æ—î–º—É –∫–æ–¥—ñ **—Ü–µ–Ω—Ç—Ä –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞** **–Ω–µ –∑–∞–¥–∞—î—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É**, –∞–ª–µ –π–æ–≥–æ –º–æ–∂–Ω–∞ **–æ–±—á–∏—Å–ª–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** –∑ `Rect`, —è–∫–∏–π —Ç–∏ —è–≤–Ω–æ –∑–∞–¥–∞—î—à.

### üìå –©–æ —Å–∞–º–µ –∑–∞–¥–∞—î –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫?

```dart
final Rect _targetRect = Rect.fromLTWH(100, 400, 200, 100);
```

–¶–µ –æ–∑–Ω–∞—á–∞—î:

* `left = 100` (–≤—ñ–¥—Å—Ç—É–ø –∑–ª—ñ–≤–∞)
* `top = 400` (–≤—ñ–¥—Å—Ç—É–ø –∑–≥–æ—Ä–∏)
* `width = 200`
* `height = 100`

### üìç –¶–µ–Ω—Ç—Ä –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞

```dart
final targetCenter = _targetRect.center;
```

–û—Å—å —Ü—è —Å—Ç—Ä—ñ—á–∫–∞ –≤ –º–µ—Ç–æ–¥—ñ `_startShrinkAnimation()` —ñ —î **—î–¥–∏–Ω–æ—é —è–≤–Ω–æ—é –≤–∫–∞–∑—ñ–≤–∫–æ—é –Ω–∞ —Ü–µ–Ω—Ç—Ä** –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞ —É —Ç–≤–æ—î–º—É –∫–æ–¥—ñ.

Flutter –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—á–∏—Å–ª—é—î —Ü–µ–Ω—Ç—Ä –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞ —è–∫:

```dart
Offset(
  _targetRect.left + _targetRect.width / 2,
  _targetRect.top + _targetRect.height / 2,
)
```

–£ —Ç–≤–æ—î–º—É –≤–∏–ø–∞–¥–∫—É —Ü–µ:

```dart
Offset(
  100 + 200 / 2, // 200
  400 + 100 / 2  // 450
) ‚Üí Offset(200, 450)
```

–¶–µ–π —Ü–µ–Ω—Ç—Ä –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —É `Tween<Offset>`:

```dart
end: targetCenter,
```

–¢–æ–±—Ç–æ: üîµ –∫–æ–ª–æ –ª–µ—Ç–∏—Ç—å —Å–∞–º–µ –≤ —Ü–µ–Ω—Ç—Ä üü© –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞.

---

‚úÖ **–ü—ñ–¥—Å—É–º–æ–∫**:

* –¢–∏ —è–≤–Ω–æ –∑–∞–¥–∞—î—à –ª–∏—à–µ `Rect.fromLTWH(...)`.
* –¶–µ–Ω—Ç—Ä –±–µ—Ä–µ—Ç—å—Å—è —á–µ—Ä–µ–∑ `.center`, —Ç–æ–±—Ç–æ –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —ñ —Ä–æ–∑–º—ñ—Ä—ñ–≤ –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞.
